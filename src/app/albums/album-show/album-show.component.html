<div class="container" *ngIf="album">
  <div class="row title">
    <div class="col-12 text-center mt-3">
      <h1>{{album.title}}</h1>
    </div>
  </div>

  <div class="row">
    <div class="col-3">
      <button *ngIf="album && userId == album.creator" mat-raised-button class="text-center" color="primary" (click)="onAdd()">Add a Photo</button>
    </div>

    <div class="col-7" *ngIf="!isLoading && addPhoto">
      <form [formGroup]="form" (submit)="onAddPhoto()">
        <button mat-stroked-button type="button" (click)="filePicker.click()">Pick Image</button>
        <input type="file" #filePicker (change)="onPhotoPicked($event)">

        <button
        mat-raised-button
        color="accent"
        class="ml-3"
        type="submit">Add the photo</button>
      </form>
    </div>

    <div *ngIf="!addPhoto" class="offset-7"></div>

    <div class="col-2">
        <button *ngIf='articleExist' mat-raised-button color="primary" class="ml-3" (click)="onShow(albumId)" style="position:absolute; right:0;">Show Article</button>
        <button *ngIf='!articleExist && userId == album.creator' mat-raised-button color="primary" class="ml-3" (click)="onAddArticle(albumId)" style="position:absolute; right:0;">Create Article</button>
    </div>
  </div>

  <div class="row mt-2" *ngIf="imagePreview !== '' && imagePreview && form.get('image').valid && addPhoto && !isLoading">
    <div class="offset-3 col-4">
        <div class="ml-5 image-preview">
            <img [src]="imagePreview" [alt]="form.value.title">
        </div>
    </div>
  </div>

  <div *ngIf="photosToDisplay.length == 4" class="row mt-3">
    <div class="col-3 mx-auto mt-4" *ngFor="let photo of photosToDisplay">
      <button *ngIf="userId == album.creator" mat-raised-button class="text-center ml-3" color="warn" (click)="onDelete(photo)">X</button>
      <mat-card>
        <img mat-card-image class="mx-auto mt-1 little-picture" [src]="photo" [alt]="album.imagePath">
      </mat-card>
    </div>
  </div>

  <div *ngIf="photosToDisplay.length == 3" class="row mt-3">
    <div class="col-4 mx-auto mt-4" *ngFor="let photo of photosToDisplay">
      <button *ngIf="userId == album.creator" mat-raised-button class="text-center ml-3" color="warn" (click)="onDelete(photo)">X</button>
      <mat-card>
        <img mat-card-image class="mx-auto mt-1 little-picture" [src]="photo" [alt]="album.imagePath">
      </mat-card>
    </div>
  </div>

  <div *ngIf="photosToDisplay.length == 2" class="row mt-3">
    <div class="col-5 mx-auto mt-4" *ngFor="let photo of photosToDisplay">
      <button *ngIf="userId == album.creator" mat-raised-button class="text-center ml-3" color="warn" (click)="onDelete(photo)">X</button>
      <mat-card>
        <img mat-card-image class="mx-auto mt-1 medium-picture" [src]="photo" [alt]="album.imagePath">
      </mat-card>
    </div>
  </div>

  <div *ngIf="photosToDisplay.length == 1" class="row mt-3">
    <div class="col-8 mx-auto mt-4" *ngFor="let photo of photosToDisplay">
      <button *ngIf="userId == album.creator" mat-raised-button class="text-center ml-3" color="warn" (click)="onDelete(photo)">X</button>
      <mat-card>
        <img mat-card-image class="mx-auto mt-1 big-picture" [src]="photo" [alt]="album.imagePath">
      </mat-card>
    </div>
  </div>


  <div class="row mt-2">
    <div class="col">
      <mat-paginator [length]="totalPhotos" [pageSize]="photosPerPage" [pageSizeOptions]="pageSizeOptions" (page)="onChangedPage($event)"></mat-paginator>
    </div>
  </div>
</div>
