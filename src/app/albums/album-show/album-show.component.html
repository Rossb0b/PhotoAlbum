<div class="container" *ngIf="album">
  <div class="row title">
    <div class="col-12 text-center mt-3">
      <h1>{{album.title}}</h1>
    </div>
  </div>

  <div class="row">
    <div class="col-md-2 col-lg-3">
      <button *ngIf="album && userId == album.creator" mat-raised-button class="text-center" color="primary" (click)="onAdd()">Add a Photo</button>
    </div>

    <div class="col-md-8 col-lg-6" *ngIf="!isLoading && addPhoto">
      <form [formGroup]="form" (submit)="AddPhoto()">
        <div class="row">
          <div class="col-6 mx-auto">
            <button mat-stroked-button type="button" (click)="filePicker.click()">Pick Image</button>
            <input type="file" #filePicker (change)="onPhotoPicked($event)">
          </div>

          <div class="col-6 mx-auto">
            <button
            mat-raised-button
            color="accent"
            type="submit">Add the photo</button>
          </div>
        </div>
      </form>
    </div>

    <div *ngIf="!addPhoto" class="offset-md-8 offset-lg-6"></div>

    <div class="col-md-2 col-lg-3">
        <button
        *ngIf='articleExist'
        mat-raised-button
        color="primary"
        class="ml-3"
        (click)="onShow(albumId)"
        style="position:absolute; right:0;">Show Article</button>

        <button
        *ngIf='!articleExist && userId == album.creator'
        mat-raised-button color="primary"
        class="ml-3"
        (click)="addArticle(albumId)"
        style="position:absolute; right:0;">Create Article</button>
    </div>
  </div>

  <div class="row mt-2" *ngIf="imagePreview !== '' && imagePreview && form.get('image').valid && addPhoto && !isLoading">
    <div class="col-4 mx-auto">
        <div class="image-preview">
            <img [src]="imagePreview" [alt]="form.value.title">
        </div>
    </div>
  </div>

  <div *ngIf="photosToDisplay.length == 4" class="row mt-3">
    <div class="col-3 mx-auto mt-4" *ngFor="let photo of photosToDisplay">
      <button *ngIf="userId == album.creator" mat-raised-button class="text-center ml-3" color="warn" (click)="deletePhoto(photo.path)">X</button>
      <mat-card>
        <img mat-card-image class="mx-auto mt-1 little-picture" [src]="photo.path" [alt]="photo.alt">
      </mat-card>
    </div>
  </div>

  <div *ngIf="photosToDisplay.length == 3" class="row mt-3">
    <div class="col-4 mx-auto mt-4" *ngFor="let photo of photosToDisplay">
      <button *ngIf="userId == album.creator" mat-raised-button class="text-center ml-3" color="warn" (click)="deletePhoto(photo.path)">X</button>
      <mat-card>
        <img mat-card-image class="mx-auto mt-1 little-picture" [src]="photo.path" [alt]="photo.alt">
      </mat-card>
    </div>
  </div>

  <div *ngIf="photosToDisplay.length == 2" class="row mt-3">
    <div class="col-5 mx-auto mt-4" *ngFor="let photo of photosToDisplay">
      <button *ngIf="userId == album.creator" mat-raised-button class="text-center ml-3" color="warn" (click)="deletePhoto(photo.path)">X</button>
      <mat-card>
        <img mat-card-image class="mx-auto mt-1 medium-picture" [src]="photo.path" [alt]="photo.alt">
      </mat-card>
    </div>
  </div>

  <div *ngIf="photosToDisplay.length == 1" class="row mt-3">
    <div class="col-8 mx-auto mt-4" *ngFor="let photo of photosToDisplay">
      <button *ngIf="userId == album.creator" mat-raised-button class="text-center ml-3" color="warn" (click)="deletePhoto(photo.path)">X</button>
      <mat-card>
        <img mat-card-image class="mx-auto mt-1 big-picture" [src]="photo.path" [alt]="photo.alt">
      </mat-card>
    </div>
  </div>


  <div class="row mt-2">
    <div class="col">
      <mat-paginator [length]="totalPhotos" [pageSize]="photosPerPage" [pageSizeOptions]="pageSizeOptions" (page)="onChangedPage($event)"></mat-paginator>
    </div>
  </div>
</div>
